# é€”ç‚¹å„¿å•¥æ—…æ¸¸è§„åˆ’ç³»ç»Ÿ - å®Œæ•´é¡¹ç›®æ–‡æ¡£

**ç‰ˆæœ¬**: 1.1.0  
**åˆ›å»ºæ—¥æœŸ**: 2025-12-10  
**GitHub**: https://github.com/3217741252tsl-collab/tudianersha

---

## ğŸ“š ç›®å½•

1. [é¡¹ç›®æ¦‚è¿°](#1-é¡¹ç›®æ¦‚è¿°)
2. [ç³»ç»Ÿæ¶æ„](#2-ç³»ç»Ÿæ¶æ„)
3. [æŠ€æœ¯æ ˆè¯¦è§£](#3-æŠ€æœ¯æ ˆè¯¦è§£)
4. [æ•°æ®åº“è®¾è®¡](#4-æ•°æ®åº“è®¾è®¡)
5. [æ ¸å¿ƒåŠŸèƒ½æ¨¡å—](#5-æ ¸å¿ƒåŠŸèƒ½æ¨¡å—)
6. [API æ¥å£æ–‡æ¡£](#6-api-æ¥å£æ–‡æ¡£)
7. [å‰ç«¯é¡µé¢è¯´æ˜](#7-å‰ç«¯é¡µé¢è¯´æ˜)
8. [ç¬¬ä¸‰æ–¹æœåŠ¡é›†æˆ](#8-ç¬¬ä¸‰æ–¹æœåŠ¡é›†æˆ)
9. [éƒ¨ç½²æŒ‡å—](#9-éƒ¨ç½²æŒ‡å—)
10. [å¼€å‘è§„èŒƒ](#10-å¼€å‘è§„èŒƒ)
11. [å¸¸è§é—®é¢˜](#11-å¸¸è§é—®é¢˜)

---

## 1. é¡¹ç›®æ¦‚è¿°

### 1.1 é¡¹ç›®ç®€ä»‹

é€”ç‚¹å„¿å•¥æ˜¯ä¸€ä¸ªæ™ºèƒ½æ—…æ¸¸è§„åˆ’åä½œå¹³å°ï¼Œæ—¨åœ¨è§£å†³å¤šäººæ—…è¡Œè§„åˆ’ä¸­çš„éœ€æ±‚æ”¶é›†ã€è·¯çº¿ç”Ÿæˆã€åä½œç®¡ç†ç­‰ç—›ç‚¹é—®é¢˜ã€‚

**æ ¸å¿ƒä»·å€¼**:
- ğŸ¤ å¤šäººåä½œå¡«å†™æ—…è¡Œéœ€æ±‚
- ğŸ¤– AI æ™ºèƒ½ç”Ÿæˆæ—…è¡Œè·¯çº¿
- ğŸ“Š å®æ—¶ç›‘æ§å‚ä¸è€…è¿›åº¦
- ğŸ’° é¢„ç®—ç®¡ç†å’Œè¡Œç¨‹å®‰æ’
- ğŸ“„ PDF è¡Œç¨‹å•å¯¼å‡º

### 1.2 åº”ç”¨åœºæ™¯

- **å›¢é˜Ÿæ—…æ¸¸**: å…¬å¸å›¢å»ºã€åŒå­¦èšä¼š
- **å®¶åº­å‡ºæ¸¸**: å¤šä¸ªå®¶åº­æˆå‘˜å…±åŒè§„åˆ’
- **æƒ…ä¾£æ—…è¡Œ**: åŒæ–¹å…±åŒå‚ä¸è·¯çº¿è®¾è®¡
- **è‡ªç”±è¡Œè§„åˆ’**: ä¸ªäººæ·±åº¦æ—…è¡Œå®šåˆ¶

### 1.3 ç³»ç»Ÿç‰¹è‰²

1. **æ™ºèƒ½åŒ–**: åŸºäº Kimi AI çš„æ™ºèƒ½è·¯çº¿ç”Ÿæˆ
2. **åä½œåŒ–**: å®æ—¶åä½œã€æƒé™ç®¡ç†ã€çŠ¶æ€ç›‘æ§
3. **å¯è§†åŒ–**: ç›´è§‚çš„ç•Œé¢è®¾è®¡ã€å®æ—¶æ•°æ®å±•ç¤º
4. **ç§»åŠ¨åŒ–**: å“åº”å¼è®¾è®¡ï¼Œæ”¯æŒæ‰‹æœºç«¯è®¿é—®
5. **é€æ˜åŒ–**: æ™¯ç‚¹"xxxæƒ³å»"æ ‡è®°ï¼Œå¢å¼ºåä½œå¯è§æ€§
6. **çµæ´»åŒ–**: ä¸‰çº§æƒé™ç®¡ç†ï¼ŒåŠ¨æ€æƒé™å‡çº§
7. **å®æ—¶æ€§**: ç¼–è¾‘è€…å®æ—¶ä¿®æ”¹è¡Œç¨‹ï¼Œæ•°æ®å³æ—¶åŒæ­¥

---

## 2. ç³»ç»Ÿæ¶æ„

### 2.1 æ•´ä½“æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    å‰ç«¯å±‚ (Frontend)                  â”‚
â”‚         HTML5 + CSS3 + JavaScript (åŸç”Ÿ)             â”‚
â”‚  login.html | index.html | create-project.html ...  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚ HTTP/REST API
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              æ§åˆ¶å±‚ (Controller Layer)                â”‚
â”‚    UserController | ProjectController | ...          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              ä¸šåŠ¡å±‚ (Service Layer)                   â”‚
â”‚  UserService | ProjectService | KimiAIService ...   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            æ•°æ®è®¿é—®å±‚ (Repository Layer)              â”‚
â”‚  UserRepository | ProjectRepository | JPA/MyBatis   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚               æ•°æ®åº“å±‚ (Database)                     â”‚
â”‚                    MySQL 8.0                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 æŠ€æœ¯åˆ†å±‚

| å±‚çº§ | æŠ€æœ¯æ ˆ | èŒè´£ |
|------|--------|------|
| å‰ç«¯å±‚ | HTML/CSS/JS | ç”¨æˆ·äº¤äº’ã€é¡µé¢æ¸²æŸ“ |
| æ§åˆ¶å±‚ | Spring MVC | è¯·æ±‚è·¯ç”±ã€å‚æ•°éªŒè¯ |
| ä¸šåŠ¡å±‚ | Spring Boot | ä¸šåŠ¡é€»è¾‘ã€äº‹åŠ¡ç®¡ç† |
| æ•°æ®è®¿é—®å±‚ | Spring Data JPA/MyBatis | æ•°æ®CRUDæ“ä½œ |
| æ•°æ®åº“å±‚ | MySQL 8.0 | æ•°æ®æŒä¹…åŒ– |

### 2.3 å¤–éƒ¨æœåŠ¡é›†æˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Spring Boot App â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚         â”‚         â”‚          â”‚
â”Œâ”€â”€â”€â”´â”€â”€â”€â” â”Œâ”€â”€â”´â”€â”€â”€â” â”Œâ”€â”€â”€â”´â”€â”€â”€â”€â” â”Œâ”€â”€â”´â”€â”€â”€â”€â”
â”‚ Kimi  â”‚ â”‚ é«˜å¾·  â”‚ â”‚ QQé‚®ç®± â”‚ â”‚ MySQL â”‚
â”‚  AI   â”‚ â”‚ åœ°å›¾  â”‚ â”‚ SMTP  â”‚ â”‚  DB   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 3. æŠ€æœ¯æ ˆè¯¦è§£

### 3.1 åç«¯æŠ€æœ¯

#### æ ¸å¿ƒæ¡†æ¶
- **Spring Boot 2.7.0**: åº”ç”¨æ¡†æ¶
- **Spring Data JPA**: ORM æŒä¹…åŒ–æ¡†æ¶
- **MyBatis 2.2.2**: SQL æ˜ å°„æ¡†æ¶
- **MySQL Connector 8.0.29**: æ•°æ®åº“é©±åŠ¨

#### å®‰å…¨ä¸å·¥å…·
- **Spring Security Crypto**: å¯†ç åŠ å¯†
- **Spring Boot Mail**: é‚®ä»¶å‘é€
- **Spring Boot Actuator**: åº”ç”¨ç›‘æ§

#### ç¬¬ä¸‰æ–¹åº“
- **OkHttp 4.10.0**: HTTP å®¢æˆ·ç«¯
- **Gson 2.9.0**: JSON å¤„ç†
- **Apache POI 5.2.3**: Office æ–‡æ¡£å¤„ç†
- **iText PDF 7.2.5**: PDF ç”Ÿæˆ
- **BouncyCastle 1.70**: åŠ å¯†ç®—æ³•

### 3.2 å‰ç«¯æŠ€æœ¯

- **HTML5**: è¯­ä¹‰åŒ–æ ‡ç­¾ã€è¡¨å•éªŒè¯
- **CSS3**: Flexboxã€Gridã€åŠ¨ç”»æ•ˆæœ
- **JavaScript (ES6+)**: åŸç”ŸJSï¼Œæ— æ¡†æ¶ä¾èµ–
- **Iconify**: å›¾æ ‡åº“
- **å“åº”å¼è®¾è®¡**: æ”¯æŒç§»åŠ¨ç«¯å’ŒPCç«¯

### 3.3 æ•°æ®åº“æŠ€æœ¯

- **MySQL 8.0**: å…³ç³»å‹æ•°æ®åº“
- **å­—ç¬¦é›†**: utf8mb4
- **æ’åºè§„åˆ™**: utf8mb4_unicode_ci
- **äº‹åŠ¡éš”ç¦»çº§åˆ«**: READ_COMMITTED

---

## 4. æ•°æ®åº“è®¾è®¡

### 4.1 æ•°æ®åº“è¡¨ç»“æ„

#### ç”¨æˆ·ç›¸å…³è¡¨

**1. users (ç”¨æˆ·è¡¨)**
```sql
CREATE TABLE users (
    id BIGINT AUTO_INCREMENT PRIMARY KEY,
    username VARCHAR(50) NOT NULL UNIQUE,
    email VARCHAR(100) NOT NULL UNIQUE,
    password VARCHAR(200) NOT NULL,
    phone VARCHAR(20),
    registration_time DATETIME NOT NULL,
    avatar_url VARCHAR(200),
    status VARCHAR(20) DEFAULT 'active'
);
```

#### é¡¹ç›®ç›¸å…³è¡¨

**2. travel_projects (æ—…è¡Œé¡¹ç›®è¡¨)**
```sql
CREATE TABLE travel_projects (
    id BIGINT AUTO_INCREMENT PRIMARY KEY,
    project_name VARCHAR(100) NOT NULL,
    creator_id BIGINT NOT NULL,
    destination VARCHAR(100),
    start_date DATE,
    end_date DATE,
    days INT,
    total_budget DECIMAL(10,2),
    status VARCHAR(20) DEFAULT 'planning',
    create_time DATETIME NOT NULL,
    cover_url VARCHAR(255)
);
```

**3. project_participants (é¡¹ç›®å‚ä¸è€…è¡¨)**
```sql
CREATE TABLE project_participants (
    id BIGINT AUTO_INCREMENT PRIMARY KEY,
    project_id BIGINT NOT NULL,
    user_id BIGINT NOT NULL,
    role VARCHAR(20) NOT NULL,
    join_time DATETIME NOT NULL,
    status VARCHAR(20) DEFAULT 'å¾…å¡«å†™'
);
```

**4. travel_participants (æ—…è¡Œå‚ä¸è€…è¡¨)**
```sql
CREATE TABLE travel_participants (
    id BIGINT AUTO_INCREMENT PRIMARY KEY,
    project_id BIGINT NOT NULL,
    user_id BIGINT NOT NULL,
    permission VARCHAR(20) NOT NULL
);
```

#### éœ€æ±‚ä¸è·¯çº¿è¡¨

**5. requirement_parameters (éœ€æ±‚å‚æ•°è¡¨)**
```sql
CREATE TABLE requirement_parameters (
    id BIGINT AUTO_INCREMENT PRIMARY KEY,
    project_id BIGINT NOT NULL,
    user_id BIGINT NOT NULL,
    interest_tags VARCHAR(200),
    daily_budget_allocation DECIMAL(10,2),
    wishlist TEXT,
    dislike_list TEXT,
    budget_breakdown TEXT
);
```

**6. ai_generated_routes (AIç”Ÿæˆè·¯çº¿è¡¨)**
```sql
CREATE TABLE ai_generated_routes (
    id BIGINT AUTO_INCREMENT PRIMARY KEY,
    project_id BIGINT NOT NULL,
    route_content TEXT,
    generation_time DATETIME NOT NULL,
    is_selected BOOLEAN DEFAULT FALSE
);
```

**7. overall_routes (æ€»ä½“è·¯çº¿è¡¨)**
```sql
CREATE TABLE overall_routes (
    id BIGINT AUTO_INCREMENT PRIMARY KEY,
    project_id BIGINT NOT NULL,
    route_name VARCHAR(100),
    highlights TEXT,
    start_date DATE,
    end_date DATE,
    created_time DATETIME NOT NULL
);
```

#### è¡Œç¨‹ä¸é¢„ç®—è¡¨

**8. activity_schedules (æ´»åŠ¨è¡Œç¨‹è¡¨)**
```sql
CREATE TABLE activity_schedules (
    id BIGINT AUTO_INCREMENT PRIMARY KEY,
    project_id BIGINT NOT NULL,
    day_number INT,
    time_period VARCHAR(20),
    location VARCHAR(100),
    activity_description TEXT,
    duration INT,
    estimated_cost DECIMAL(10,2)
);
```

**9. budgets (é¢„ç®—è¡¨)**
```sql
CREATE TABLE budgets (
    id BIGINT AUTO_INCREMENT PRIMARY KEY,
    project_id BIGINT NOT NULL,
    category VARCHAR(50),
    amount DECIMAL(10,2),
    description TEXT,
    budget DECIMAL(10,2),
    day_number INT
);
```

#### åä½œä¸åˆ†äº«è¡¨

**10. chat_messages (èŠå¤©æ¶ˆæ¯è¡¨)**
```sql
CREATE TABLE chat_messages (
    id BIGINT AUTO_INCREMENT PRIMARY KEY,
    project_id BIGINT NOT NULL,
    user_id BIGINT NOT NULL,
    username VARCHAR(50),
    message TEXT,
    created_time DATETIME NOT NULL,
    INDEX idx_project_id (project_id),
    INDEX idx_created_time (created_time)
);
```

**11. shared_documents (åˆ†äº«æ–‡æ¡£è¡¨)**
```sql
CREATE TABLE shared_documents (
    id BIGINT AUTO_INCREMENT PRIMARY KEY,
    project_id BIGINT NOT NULL,
    document_url VARCHAR(200),
    format VARCHAR(20),
    generated_time DATETIME NOT NULL,
    share_link VARCHAR(200),
    creator_id BIGINT NOT NULL
);
```

### 4.2 æ•°æ®åº“å…³ç³»å›¾

```
users (1) â”€â”€â”€â”€â”€< (N) travel_projects
  â”‚                      â”‚
  â”‚                      â”œâ”€â”€â”€â”€â”€< project_participants
  â”‚                      â”œâ”€â”€â”€â”€â”€< requirement_parameters
  â”‚                      â”œâ”€â”€â”€â”€â”€< ai_generated_routes
  â”‚                      â”œâ”€â”€â”€â”€â”€< activity_schedules
  â”‚                      â”œâ”€â”€â”€â”€â”€< budgets
  â”‚                      â”œâ”€â”€â”€â”€â”€< chat_messages
  â”‚                      â””â”€â”€â”€â”€â”€< shared_documents
  â”‚
  â””â”€â”€â”€â”€â”€< travel_participants
```

---

## 5. æ ¸å¿ƒåŠŸèƒ½æ¨¡å—

### 5.1 ç”¨æˆ·ç®¡ç†æ¨¡å—

**åŠŸèƒ½ç‚¹**:
- ç”¨æˆ·æ³¨å†Œä¸ç™»å½•
- å¯†ç åŠ å¯†å­˜å‚¨
- ç”¨æˆ·ä¿¡æ¯ç®¡ç†
- ä¼šè¯ç®¡ç†

**å…³é”®ç±»**:
- `UserController.java` - ç”¨æˆ·æ¥å£æ§åˆ¶å™¨
- `UserService.java` - ç”¨æˆ·ä¸šåŠ¡é€»è¾‘
- `UserRepository.java` - ç”¨æˆ·æ•°æ®è®¿é—®
- `User.java` - ç”¨æˆ·å®ä½“ç±»

**API ç«¯ç‚¹**:
```
POST /api/users/register  - ç”¨æˆ·æ³¨å†Œ
POST /api/users/login     - ç”¨æˆ·ç™»å½•
GET  /api/users/{id}      - è·å–ç”¨æˆ·ä¿¡æ¯
PUT  /api/users/{id}      - æ›´æ–°ç”¨æˆ·ä¿¡æ¯
```

### 5.2 é¡¹ç›®ç®¡ç†æ¨¡å—

**åŠŸèƒ½ç‚¹**:
- åˆ›å»ºæ—…è¡Œé¡¹ç›®
- é¡¹ç›®åˆ—è¡¨æŸ¥çœ‹
- é¡¹ç›®è¯¦æƒ…ç®¡ç†
- é¡¹ç›®çŠ¶æ€æ›´æ–°

**å…³é”®ç±»**:
- `TravelProjectController.java`
- `TravelProjectService.java`
- `TravelProjectRepository.java`
- `TravelProject.java`

**é¡¹ç›®çŠ¶æ€æµè½¬**:
```
åˆ›å»º â†’ éœ€æ±‚æ”¶é›†ä¸­ â†’ AIç”Ÿæˆä¸­ â†’ è·¯çº¿é€‰æ‹© â†’ åä½œä¼˜åŒ– â†’ å®Œæˆ
```

### 5.3 åä½œéœ€æ±‚æ”¶é›†æ¨¡å—

**åŠŸèƒ½ç‚¹**:
- å‚ä¸è€…é‚€è¯·
- éœ€æ±‚è¡¨å•å¡«å†™
- å¡«å†™çŠ¶æ€ç›‘æ§
- æƒé™ç®¡ç†ï¼ˆåˆ›å»ºè€…/ç¼–è¾‘è€…/æŸ¥çœ‹è€…ï¼‰
- æ™¯ç‚¹"xxxæƒ³å»"æ ‡è®°æ˜¾ç¤º
- å®æ—¶æƒé™å‡çº§å’ŒUIæ›´æ–°

**å…³é”®ç±»**:
- `ProjectParticipantController.java`
- `RequirementParameterController.java`
- `RequirementParameterService.java`

**åä½œæµç¨‹**:
1. åˆ›å»ºè€…åˆ›å»ºé¡¹ç›®
2. ç”Ÿæˆåˆ†äº«é“¾æ¥
3. å‚ä¸è€…é€šè¿‡é“¾æ¥åŠ å…¥
4. å¡«å†™ä¸ªäººéœ€æ±‚ï¼ˆåŒ…æ‹¬"æƒ³å»çš„æ™¯ç‚¹"ï¼‰
5. åˆ›å»ºè€…å®æ—¶ç›‘æ§è¿›åº¦
6. åˆ›å»ºè€…å¯å°†å‚ä¸è€…æå‡ä¸ºç¼–è¾‘è€…
7. ç¼–è¾‘è€…å¯åˆ é™¤æ™¯ç‚¹ã€ä¿®æ”¹è¡Œç¨‹
8. åä½œç•Œé¢æ˜¾ç¤º"xxxæƒ³å»"æ ‡è®°ï¼Œå¢å¼ºé€æ˜åº¦

### 5.4 AI è·¯çº¿ç”Ÿæˆæ¨¡å—

**åŠŸèƒ½ç‚¹**:
- æ”¶é›†æ‰€æœ‰å‚ä¸è€…éœ€æ±‚
- è°ƒç”¨ Kimi AI ç”Ÿæˆè·¯çº¿
- ç”Ÿæˆå¤šä¸ªè·¯çº¿æ–¹æ¡ˆ
- è·¯çº¿é€‰æ‹©ä¸ç¡®è®¤

**å…³é”®ç±»**:
- `KimiAIService.java` - AIæœåŠ¡æ ¸å¿ƒ
- `AiGeneratedRouteController.java`
- `AiGeneratedRouteService.java`

**ç”Ÿæˆæµç¨‹**:
```java
// 1. æ”¶é›†éœ€æ±‚
List<RequirementParameter> requirements = 
    requirementService.findByProjectId(projectId);

// 2. æ„å»º AI æç¤ºè¯
String prompt = buildPrompt(project, requirements);

// 3. è°ƒç”¨ Kimi AI
String aiResponse = kimiAIService.generateRoute(prompt);

// 4. ä¿å­˜ç”Ÿæˆç»“æœ
aiRouteService.save(projectId, aiResponse);
```

### 5.5 é¢„ç®—ç®¡ç†æ¨¡å—

**åŠŸèƒ½ç‚¹**:
- é¢„ç®—åˆ†ç±»ç®¡ç†
- è´¹ç”¨æ˜ç»†è®°å½•
- é¢„ç®—ç»Ÿè®¡åˆ†æ
- é¢„ç®—æé†’

**å…³é”®ç±»**:
- `BudgetController.java`
- `BudgetService.java`
- `Budget.java`

### 5.6 è¡Œç¨‹å®‰æ’æ¨¡å—

**åŠŸèƒ½ç‚¹**:
- æ¯æ—¥è¡Œç¨‹è§„åˆ’
- æ´»åŠ¨æ—¶é—´å®‰æ’
- åœ°ç‚¹ä¿¡æ¯ç®¡ç†
- è´¹ç”¨ä¼°ç®—

**å…³é”®ç±»**:
- `ActivityScheduleController.java`
- `ActivityScheduleService.java`
- `ActivitySchedule.java`

### 5.7 å®æ—¶èŠå¤©æ¨¡å—

**åŠŸèƒ½ç‚¹**:
- é¡¹ç›®å†…å®æ—¶æ²Ÿé€š
- æ¶ˆæ¯è®°å½•ä¿å­˜
- æ¶ˆæ¯æ¨é€ï¼ˆå¯æ‰©å±•ï¼‰

**å…³é”®ç±»**:
- `ChatMessageController.java`
- `ChatMessageService.java`
- `ChatMessage.java`

### 5.8 æ–‡æ¡£å¯¼å‡ºæ¨¡å—

**åŠŸèƒ½ç‚¹**:
- PDF è¡Œç¨‹å•ç”Ÿæˆ
- æ–‡æ¡£åœ¨çº¿é¢„è§ˆ
- åˆ†äº«é“¾æ¥ç”Ÿæˆ

**å…³é”®ç±»**:
- `ItineraryPdfService.java`
- `PdfExportController.java`
- `SharedDocumentService.java`

---

## 6. API æ¥å£æ–‡æ¡£

### 6.1 ç”¨æˆ·ç®¡ç† API

#### ç”¨æˆ·æ³¨å†Œ
```
POST /api/users/register
Content-Type: application/json

Request Body:
{
    "username": "zhangsan",
    "email": "zhangsan@example.com",
    "password": "password123",
    "phone": "13800138000"
}

Response:
{
    "id": 1,
    "username": "zhangsan",
    "email": "zhangsan@example.com",
    "registrationTime": "2025-12-10T10:00:00"
}
```

#### ç”¨æˆ·ç™»å½•
```
POST /api/users/login
Content-Type: application/json

Request Body:
{
    "username": "zhangsan",
    "password": "password123"
}

Response:
{
    "id": 1,
    "username": "zhangsan",
    "email": "zhangsan@example.com",
    "token": "..." (å¯æ‰©å±•)
}
```

### 6.2 é¡¹ç›®ç®¡ç† API

#### åˆ›å»ºé¡¹ç›®
```
POST /api/travel-projects
Content-Type: application/json

Request Body:
{
    "projectName": "å›½åº†ä¸ƒæ—¥æ¸¸",
    "creatorId": 1,
    "destination": "æˆéƒ½",
    "startDate": "2025-10-01",
    "endDate": "2025-10-07",
    "days": 7,
    "totalBudget": 5000.00
}

Response:
{
    "id": 1,
    "projectName": "å›½åº†ä¸ƒæ—¥æ¸¸",
    "status": "planning",
    "createTime": "2025-12-10T10:00:00"
}
```

#### è·å–é¡¹ç›®åˆ—è¡¨
```
GET /api/travel-projects?userId=1

Response:
[
    {
        "id": 1,
        "projectName": "å›½åº†ä¸ƒæ—¥æ¸¸",
        "destination": "æˆéƒ½",
        "days": 7,
        "status": "planning"
    }
]
```

### 6.3 éœ€æ±‚å‚æ•° API

#### æäº¤éœ€æ±‚
```
POST /api/requirement-parameters
Content-Type: application/json

Request Body:
{
    "projectId": 1,
    "userId": 1,
    "interestTags": "ç¾é£Ÿ,æ‘„å½±,æ–‡åŒ–",
    "dailyBudgetAllocation": 500.00,
    "wishlist": "å®½çª„å··å­,é”¦é‡Œ",
    "dislikeList": "è¾›è¾£é£Ÿç‰©",
    "budgetBreakdown": "[{\"category\":\"äº¤é€š\",\"amount\":1000}]"
}
```

### 6.4 AI è·¯çº¿ç”Ÿæˆ API

#### ç”Ÿæˆè·¯çº¿
```
POST /api/ai-routes/generate
Content-Type: application/json

Request Body:
{
    "projectId": 1
}

Response:
{
    "success": true,
    "routes": [
        {
            "id": 1,
            "routeContent": "...",
            "generationTime": "2025-12-10T10:30:00"
        }
    ]
}
```

### 6.5 èŠå¤©æ¶ˆæ¯ API

#### å‘é€æ¶ˆæ¯
```
POST /api/chat-messages
Content-Type: application/json

Request Body:
{
    "projectId": 1,
    "userId": 1,
    "username": "å¼ ä¸‰",
    "message": "å¤§å®¶è§‰å¾—è¿™æ¡è·¯çº¿æ€ä¹ˆæ ·?"
}
```

#### è·å–æ¶ˆæ¯å†å²
```
GET /api/chat-messages/project/1

Response:
[
    {
        "id": 1,
        "username": "å¼ ä¸‰",
        "message": "å¤§å®¶è§‰å¾—è¿™æ¡è·¯çº¿æ€ä¹ˆæ ·?",
        "createdTime": "2025-12-10T11:00:00"
    }
]
```

### 6.6 é«˜å¾·åœ°å›¾ API

#### æœç´¢POI (æ™¯ç‚¹)
```
GET /api/amap-test/poi/search?city=æˆéƒ½&keyword=å®½çª„å··å­

Response:
{
    "success": true,
    "pois": [
        {
            "name": "å®½çª„å··å­",
            "address": "é’ç¾ŠåŒºé‡‘æ²³è·¯å£å®½çª„å··å­",
            "location": "104.056,30.672",
            "type": "é£æ™¯åèƒœ"
        }
    ]
}
```

---

## 7. å‰ç«¯é¡µé¢è¯´æ˜

### 7.1 ç™»å½•æ³¨å†Œé¡µé¢ (login.html)

**åŠŸèƒ½**:
- ç”¨æˆ·ç™»å½•
- ç”¨æˆ·æ³¨å†Œ
- è¡¨å•éªŒè¯

**æŠ€æœ¯å®ç°**:
- å“åº”å¼è¡¨å•è®¾è®¡
- å‰ç«¯è¡¨å•éªŒè¯
- LocalStorage å­˜å‚¨ç”¨æˆ·ä¿¡æ¯

**å…³é”®ä»£ç **:
```javascript
// ç™»å½•å¤„ç†
async function handleLogin(username, password) {
    const response = await post('/users/login', {
        username, password
    });
    
    if (response && response.id) {
        auth.setUser(response);
        window.location.href = '/index.html';
    }
}
```

### 7.2 ä¸»é¡µ (index.html)

**åŠŸèƒ½**:
- å±•ç¤ºç”¨æˆ·åˆ›å»ºçš„é¡¹ç›®
- å±•ç¤ºå‚ä¸çš„é¡¹ç›®
- å¿«é€Ÿåˆ›å»ºæ–°é¡¹ç›®

**é¡µé¢å¸ƒå±€**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         é¡¶éƒ¨å¯¼èˆªæ  (Header)          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚         æ¬¢è¿æ¨ªå¹… (Welcome)           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚     æˆ‘åˆ›å»ºçš„æ—…é€” (Created)           â”‚
â”‚  [é¡¹ç›®å¡ç‰‡1] [é¡¹ç›®å¡ç‰‡2] [é¡¹ç›®å¡ç‰‡3] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚     æˆ‘å‚ä¸çš„æ—…é€” (Participated)      â”‚
â”‚  [é¡¹ç›®å¡ç‰‡4] [é¡¹ç›®å¡ç‰‡5]             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 7.3 åˆ›å»ºé¡¹ç›®é¡µé¢ (create-project.html)

**åŠŸèƒ½**:
- å¡«å†™é¡¹ç›®åŸºæœ¬ä¿¡æ¯
- å¡«å†™ä¸ªäººéœ€æ±‚å‚æ•°
- ä¸Šä¼ é¡¹ç›®å°é¢
- é‚€è¯·å‚ä¸è€…

**è¡¨å•å­—æ®µ**:
1. åŸºæœ¬ä¿¡æ¯
   - é¡¹ç›®åç§°
   - ç›®çš„åœ°
   - å‡ºå‘æ—¶é—´
   - è¿”å›æ—¶é—´
   - æ€»é¢„ç®—

2. éœ€æ±‚å‚æ•°
   - å…´è¶£æ ‡ç­¾
   - æƒ³å»çš„æ™¯ç‚¹
   - ä¸æƒ³å»çš„åœ°æ–¹
   - æ¯æ—¥é¢„ç®—åˆ†é…
   - é¢„ç®—æ˜ç»†

### 7.4 åä½œå¡«å†™é¡µé¢ (collaboration.html)

**åŠŸèƒ½**:
- å‚ä¸è€…å¡«å†™éœ€æ±‚
- å®æ—¶èŠå¤©
- æŸ¥çœ‹å…¶ä»–å‚ä¸è€…
- æƒé™ç®¡ç†

**å¸ƒå±€ç»“æ„**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          é¡¹ç›®æ ‡é¢˜ + å‚ä¸è€…å¤´åƒ            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                  â”‚                      â”‚
â”‚   éœ€æ±‚è¡¨å•åŒº      â”‚     å®æ—¶èŠå¤©åŒº        â”‚
â”‚   (å·¦ä¾§70%)       â”‚     (å³ä¾§30%)        â”‚
â”‚                  â”‚                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 7.5 å‚ä¸è€…çŠ¶æ€ç›‘æ§é¡µé¢ (participants-status.html)

**åŠŸèƒ½**:
- åˆ›å»ºè€…ä¸“ç”¨é¡µé¢
- æŸ¥çœ‹æ‰€æœ‰å‚ä¸è€…å¡«å†™çŠ¶æ€
- å®æ—¶æ›´æ–°è¿›åº¦
- å‚¬ä¿ƒæœªå¡«å†™æˆå‘˜

**çŠ¶æ€æ ‡è¯†**:
- âœ… å·²å®Œæˆ (ç»¿è‰²)
- â³ å¡«å†™ä¸­ (é»„è‰²)
- â¸ å¾…å¡«å†™ (ç°è‰²)

### 7.6 è·¯çº¿é€‰æ‹©é¡µé¢ (route-selection.html)

**åŠŸèƒ½**:
- å±•ç¤º AI ç”Ÿæˆçš„å¤šæ¡è·¯çº¿
- è·¯çº¿å¯¹æ¯”
- è·¯çº¿è¯¦æƒ…æŸ¥çœ‹
- é€‰æ‹©ç¡®è®¤

**è·¯çº¿å¡ç‰‡å†…å®¹**:
- è·¯çº¿åç§°
- è·¯çº¿äº®ç‚¹
- æ¯æ—¥è¡Œç¨‹æ¦‚è§ˆ
- é¢„ç®—é¢„ä¼°
- æ™¯ç‚¹åˆ—è¡¨

### 7.7 åˆ†äº«é¡µé¢ (share.html)

**åŠŸèƒ½**:
- ç”Ÿæˆåˆ†äº«é“¾æ¥
- PDF é¢„è§ˆ
- PDF ä¸‹è½½
- ç¤¾äº¤åª’ä½“åˆ†äº«

---

## 8. ç¬¬ä¸‰æ–¹æœåŠ¡é›†æˆ

### 8.1 Kimi AI é›†æˆ

**é…ç½® (application.yml)**:
```yaml
kimi:
  api:
    key: sk-xxxxxxxxxxxxxxxx
    url: https://api.moonshot.cn/v1/chat/completions
    model: moonshot-v1-8k
```

**è°ƒç”¨ç¤ºä¾‹ (KimiAIService.java)**:
```java
public String generateRoute(String prompt) {
    OkHttpClient client = new OkHttpClient();
    
    JSONObject requestBody = new JSONObject();
    requestBody.put("model", kimiModel);
    requestBody.put("messages", new JSONArray()
        .put(new JSONObject()
            .put("role", "user")
            .put("content", prompt)));
    
    Request request = new Request.Builder()
        .url(kimiApiUrl)
        .addHeader("Authorization", "Bearer " + kimiApiKey)
        .post(RequestBody.create(
            requestBody.toString(), 
            MediaType.parse("application/json")))
        .build();
    
    Response response = client.newCall(request).execute();
    return parseResponse(response.body().string());
}
```

**æç¤ºè¯æ¨¡æ¿**:
```
è¯·æ ¹æ®ä»¥ä¸‹éœ€æ±‚ç”Ÿæˆä¸€ä»½è¯¦ç»†çš„{days}æ—¥{destination}æ—…æ¸¸è·¯çº¿ï¼š

é¡¹ç›®ä¿¡æ¯ï¼š
- ç›®çš„åœ°ï¼š{destination}
- å¤©æ•°ï¼š{days}å¤©
- æ€»é¢„ç®—ï¼š{budget}å…ƒ

å‚ä¸è€…éœ€æ±‚æ±‡æ€»ï¼š
{participantRequirements}

è¯·ç”ŸæˆåŒ…å«ä»¥ä¸‹å†…å®¹çš„è·¯çº¿ï¼š
1. æ¯æ—¥è¯¦ç»†è¡Œç¨‹
2. æ™¯ç‚¹æ¨èåŠç†ç”±
3. é¤é¥®å»ºè®®
4. é¢„ç®—åˆ†é…
5. æ³¨æ„äº‹é¡¹
```

### 8.2 é«˜å¾·åœ°å›¾ API é›†æˆ

**é…ç½®**:
```yaml
amap:
  api:
    key: your_amap_api_key
```

**POI æœç´¢ (AmapPoiService.java)**:
```java
public Map<String, Object> searchPoi(String city, String keyword) {
    String url = String.format(
        "https://restapi.amap.com/v3/place/text?key=%s&city=%s&keywords=%s",
        amapApiKey, city, keyword);
    
    OkHttpClient client = new OkHttpClient();
    Request request = new Request.Builder().url(url).build();
    
    Response response = client.newCall(request).execute();
    return parsePoiResponse(response.body().string());
}
```

**åŠŸèƒ½åº”ç”¨**:
- æ™¯ç‚¹è‡ªåŠ¨è¡¥å…¨
- åœ°ç†ç¼–ç 
- åœ°å€è§£æ
- è·ç¦»è®¡ç®—

### 8.3 QQ é‚®ç®± SMTP é›†æˆ

**é…ç½®**:
```yaml
spring:
  mail:
    host: smtp.qq.com
    port: 587
    username: your_email@qq.com
    password: your_authorization_code
    properties:
      mail:
        smtp:
          auth: true
          starttls:
            enable: true
```

**é‚®ä»¶å‘é€ (EmailService.java)**:
```java
@Service
public class EmailService {
    @Autowired
    private JavaMailSender mailSender;
    
    @Value("${spring.mail.username}")
    private String from;
    
    public void sendInvitation(String to, String projectName, String link) {
        SimpleMailMessage message = new SimpleMailMessage();
        message.setFrom(from);
        message.setTo(to);
        message.setSubject("æ—…è¡Œé¡¹ç›®é‚€è¯· - " + projectName);
        message.setText("æ‚¨è¢«é‚€è¯·å‚ä¸é¡¹ç›®: " + projectName + 
                       "\nç‚¹å‡»é“¾æ¥åŠ å…¥: " + link);
        
        mailSender.send(message);
    }
}
```

**åº”ç”¨åœºæ™¯**:
- é¡¹ç›®é‚€è¯·é‚®ä»¶
- çŠ¶æ€æé†’é‚®ä»¶
- è¡Œç¨‹å•å‘é€

---

## 9. éƒ¨ç½²æŒ‡å—

### 9.1 å¼€å‘ç¯å¢ƒéƒ¨ç½²

**å‰ç½®æ¡ä»¶**:
- JDK 11+
- MySQL 8.0+
- IntelliJ IDEA
- Navicat for MySQL

**æ­¥éª¤**:

1. **å…‹éš†é¡¹ç›®**
```bash
git clone https://github.com/3217741252tsl-collab/tudianersha.git
```

2. **åˆ›å»ºæ•°æ®åº“**
```sql
CREATE DATABASE tudianersha 
CHARACTER SET utf8mb4 
COLLATE utf8mb4_unicode_ci;
```

3. **æ‰§è¡ŒSQLè„šæœ¬**
- æ‰§è¡Œ `src/main/resources/schema.sql`
- æ‰§è¡Œ `src/main/resources/data.sql`

4. **ä¿®æ”¹é…ç½®æ–‡ä»¶**
```yaml
# application.yml
spring:
  datasource:
    username: your_username
    password: your_password
```

5. **è¿è¡Œé¡¹ç›®**
```bash
mvn spring-boot:run
```

æˆ–åœ¨ IDEA ä¸­ç›´æ¥è¿è¡Œ `Application.java`

### 9.2 ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²

**æœåŠ¡å™¨è¦æ±‚**:
- Linux (æ¨è Ubuntu 20.04+)
- 2æ ¸4Gå†…å­˜ä»¥ä¸Š
- 40GB ç£ç›˜ç©ºé—´

**éƒ¨ç½²æ­¥éª¤**:

1. **å®‰è£… JDK**
```bash
sudo apt update
sudo apt install openjdk-11-jdk
```

2. **å®‰è£… MySQL**
```bash
sudo apt install mysql-server
sudo mysql_secure_installation
```

3. **æ‰“åŒ…åº”ç”¨**
```bash
mvn clean package -DskipTests
```

4. **ä¸Šä¼  JAR æ–‡ä»¶**
```bash
scp target/tudianersha-system-1.0-SNAPSHOT.jar user@server:/opt/app/
```

5. **å¯åŠ¨åº”ç”¨**
```bash
java -jar tudianersha-system-1.0-SNAPSHOT.jar \
  --spring.profiles.active=prod \
  --server.port=8010
```

6. **é…ç½®ä¸ºç³»ç»ŸæœåŠ¡ (systemd)**

åˆ›å»º `/etc/systemd/system/tudianersha.service`:
```ini
[Unit]
Description=Tudianersha Travel System
After=mysql.service

[Service]
Type=simple
User=app
ExecStart=/usr/bin/java -jar /opt/app/tudianersha-system-1.0-SNAPSHOT.jar
Restart=on-failure

[Install]
WantedBy=multi-user.target
```

å¯åŠ¨æœåŠ¡:
```bash
sudo systemctl enable tudianersha
sudo systemctl start tudianersha
```

### 9.3 Docker éƒ¨ç½² (å¯é€‰)

**Dockerfile**:
```dockerfile
FROM openjdk:11-jre-slim
WORKDIR /app
COPY target/tudianersha-system-1.0-SNAPSHOT.jar app.jar
EXPOSE 8010
ENTRYPOINT ["java", "-jar", "app.jar"]
```

**docker-compose.yml**:
```yaml
version: '3.8'
services:
  mysql:
    image: mysql:8.0
    environment:
      MYSQL_ROOT_PASSWORD: password
      MYSQL_DATABASE: tudianersha
    volumes:
      - mysql_data:/var/lib/mysql
      - ./src/main/resources/schema.sql:/docker-entrypoint-initdb.d/1-schema.sql
      - ./src/main/resources/data.sql:/docker-entrypoint-initdb.d/2-data.sql
    
  app:
    build: .
    ports:
      - "8010:8010"
    depends_on:
      - mysql
    environment:
      SPRING_DATASOURCE_URL: jdbc:mysql://mysql:3306/tudianersha

volumes:
  mysql_data:
```

è¿è¡Œ:
```bash
docker-compose up -d
```

---

## 10. å¼€å‘è§„èŒƒ

### 10.1 ä»£ç è§„èŒƒ

**å‘½åè§„èŒƒ**:
- ç±»å: PascalCase (UserService)
- æ–¹æ³•å: camelCase (getUserById)
- å¸¸é‡å: UPPER_SNAKE_CASE (MAX_RETRY_COUNT)
- å˜é‡å: camelCase (userId)

**æ³¨é‡Šè§„èŒƒ**:
```java
/**
 * æ ¹æ®ç”¨æˆ·IDè·å–ç”¨æˆ·ä¿¡æ¯
 * 
 * @param id ç”¨æˆ·ID
 * @return ç”¨æˆ·å¯¹è±¡ï¼Œä¸å­˜åœ¨è¿”å›null
 * @throws IllegalArgumentException å¦‚æœidå°äºç­‰äº0
 */
public User getUserById(Long id) {
    // ...
}
```

### 10.2 Git æäº¤è§„èŒƒ

**æäº¤æ¶ˆæ¯æ ¼å¼**:
```
<type>(<scope>): <subject>

<body>

<footer>
```

**Type ç±»å‹**:
- feat: æ–°åŠŸèƒ½
- fix: ä¿®å¤bug
- docs: æ–‡æ¡£ä¿®æ”¹
- style: ä»£ç æ ¼å¼è°ƒæ•´
- refactor: é‡æ„
- test: æµ‹è¯•ç›¸å…³
- chore: æ„å»ºå·¥å…·æˆ–è¾…åŠ©å·¥å…·å˜åŠ¨

**ç¤ºä¾‹**:
```
feat(user): æ·»åŠ ç”¨æˆ·å¤´åƒä¸Šä¼ åŠŸèƒ½

- æ”¯æŒ JPG/PNG æ ¼å¼
- é™åˆ¶å¤§å°2MB
- è‡ªåŠ¨å‹ç¼©å›¾ç‰‡

Closes #123
```

### 10.3 API è®¾è®¡è§„èŒƒ

**RESTful é£æ ¼**:
```
GET    /api/users        - è·å–ç”¨æˆ·åˆ—è¡¨
GET    /api/users/{id}   - è·å–å•ä¸ªç”¨æˆ·
POST   /api/users        - åˆ›å»ºç”¨æˆ·
PUT    /api/users/{id}   - æ›´æ–°ç”¨æˆ·
DELETE /api/users/{id}   - åˆ é™¤ç”¨æˆ·
```

**å“åº”æ ¼å¼**:
```json
{
    "success": true,
    "data": { ... },
    "message": "æ“ä½œæˆåŠŸ",
    "timestamp": "2025-12-10T10:00:00"
}
```

---

## 11. å¸¸è§é—®é¢˜

### Q1: å¯åŠ¨æ—¶æ•°æ®åº“è¿æ¥å¤±è´¥

**åŸå› **: MySQL æœªå¯åŠ¨æˆ–é…ç½®é”™è¯¯

**è§£å†³**:
1. æ£€æŸ¥ MySQL æœåŠ¡çŠ¶æ€
2. éªŒè¯ `application.yml` ä¸­çš„é…ç½®
3. ç¡®è®¤æ•°æ®åº“å·²åˆ›å»º

### Q2: AI åŠŸèƒ½æ— æ³•ä½¿ç”¨

**åŸå› **: Kimi API Key æœªé…ç½®æˆ–æ— æ•ˆ

**è§£å†³**:
1. åœ¨ https://platform.moonshot.cn/ è·å– API Key
2. é…ç½®åˆ° `application.yml`
3. æ£€æŸ¥ API è°ƒç”¨é¢åº¦

### Q3: é‚®ä»¶å‘é€å¤±è´¥

**åŸå› **: SMTP é…ç½®é”™è¯¯æˆ–æˆæƒç æ— æ•ˆ

**è§£å†³**:
1. ç™»å½• QQ é‚®ç®±è·å–æˆæƒç 
2. ç¡®è®¤ SMTP ç«¯å£587å¯ç”¨
3. æ£€æŸ¥é˜²ç«å¢™è®¾ç½®

### Q4: å‰ç«¯æ— æ³•è®¿é—®åç«¯ API

**åŸå› **: ç«¯å£ä¸ä¸€è‡´æˆ– CORS é…ç½®é—®é¢˜

**è§£å†³**:
1. ç¡®è®¤åç«¯è¿è¡Œåœ¨ 8010 ç«¯å£
2. æ£€æŸ¥ `WebConfig.java` ä¸­çš„ CORS é…ç½®
3. ä½¿ç”¨æµè§ˆå™¨å¼€å‘è€…å·¥å…·æŸ¥çœ‹ç½‘ç»œè¯·æ±‚

---

## é™„å½• A: é¡¹ç›®æ–‡ä»¶æ¸…å•

### åç«¯ Java æ–‡ä»¶

**é…ç½®ç±»** (2ä¸ª):
- DatabaseConfig.java
- WebConfig.java

**æ§åˆ¶å™¨** (18ä¸ª):
- UserController.java
- TravelProjectController.java
- ProjectParticipantController.java
- RequirementParameterController.java
- AiGeneratedRouteController.java
- OverallRouteController.java
- ActivityScheduleController.java
- BudgetController.java
- ChatMessageController.java
- TravelParticipantController.java
- TravelSessionController.java
- SharedDocumentController.java
- EmailController.java
- PdfExportController.java
- AmapTestController.java
- ApiTestController.java
- HealthController.java
- MainController.java

**å®ä½“ç±»** (12ä¸ª):
- User.java
- TravelProject.java
- ProjectParticipant.java
- RequirementParameter.java
- AiGeneratedRoute.java
- OverallRoute.java
- ActivitySchedule.java
- Budget.java
- ChatMessage.java
- TravelParticipant.java
- TravelSession.java
- SharedDocument.java

**Repository** (12ä¸ª):
- å¯¹åº”æ¯ä¸ªå®ä½“çš„ Repository æ¥å£

**Service** (15ä¸ª):
- UserService.java
- TravelProjectService.java
- ProjectParticipantService.java
- RequirementParameterService.java
- AiGeneratedRouteService.java
- OverallRouteService.java
- ActivityScheduleService.java
- BudgetService.java
- ChatMessageService.java
- TravelParticipantService.java
- TravelSessionService.java
- SharedDocumentService.java
- KimiAIService.java
- AmapPoiService.java
- EmailService.java
- ItineraryPdfService.java

### å‰ç«¯æ–‡ä»¶

**HTML é¡µé¢** (7ä¸ª):
- login.html - ç™»å½•æ³¨å†Œ
- index.html - ä¸»é¡µ
- create-project.html - åˆ›å»ºé¡¹ç›®
- collaboration.html - åä½œå¡«å†™
- participants-status.html - å‚ä¸è€…çŠ¶æ€
- route-selection.html - è·¯çº¿é€‰æ‹©
- share.html - åˆ†äº«é¡µé¢

**CSS æ–‡ä»¶**:
- common.css - å…¬å…±æ ·å¼

**JavaScript æ–‡ä»¶**:
- common.js - å…¬å…±å‡½æ•°

### é…ç½®æ–‡ä»¶

- application.yml - åº”ç”¨é…ç½®
- pom.xml - Maven é…ç½®
- schema.sql - æ•°æ®åº“è¡¨ç»“æ„
- data.sql - åˆå§‹æ•°æ®
- .gitignore - Git å¿½ç•¥æ–‡ä»¶

---

## é™„å½• B: æŠ€æœ¯æ”¯æŒ

**GitHub ä»“åº“**: https://github.com/3217741252tsl-collab/tudianersha

**é—®é¢˜åé¦ˆ**: 
- GitHub Issues
- Email: 3217741252tsl@gmail.com

**æ–‡æ¡£æ›´æ–°æ—¥æœŸ**: 2025-12-10

---

## é™„å½• C: æ›´æ–°æ—¥å¿—

### v1.1.0 (2025-12-10)

**æ–°å¢åŠŸèƒ½**:
- âœ¨ åä½œç•Œé¢æ™¯ç‚¹"xxxæƒ³å»"æ ‡è®°åŠŸèƒ½
  - åŠ è½½æ‰€æœ‰ç”¨æˆ·éœ€æ±‚å‚æ•°
  - æ¨¡ç³ŠåŒ¹é…æ™¯ç‚¹åç§°ç®—æ³•
  - æ™¯ç‚¹åˆ—è¡¨å’Œè·¯çº¿æ€»è§ˆæ˜¾ç¤ºç”¨æˆ·å
  - å¢å¼ºåä½œå¯è§æ€§å’Œé€æ˜åº¦

**åŠŸèƒ½ä¼˜åŒ–**:
- ğŸ”§ æƒé™ç®¡ç†ä¼˜åŒ–
  - ä¸»é¡µé¡¹ç›®åˆ†ç±»ä½¿ç”¨`projectParticipant.role`åˆ¤æ–­
  - ç¼–è¾‘è€…æƒé™é¡¹ç›®æ­£ç¡®æ˜¾ç¤ºåœ¨"æˆ‘ç¼–è¾‘çš„é¡¹ç›®"æ¿å—
  - æƒé™å‡çº§åè‡ªåŠ¨é‡æ–°æ£€æŸ¥å¹¶æ›´æ–°UI
  - ç»Ÿä¸€ä½¿ç”¨ä¸­æ–‡`role`å­—æ®µï¼ˆ"åˆ›å»ºè€…"/"ç¼–è¾‘è€…"/"æŸ¥çœ‹è€…"ï¼‰

- ğŸ”§ æ•°æ®æŒä¹…åŒ–ä¼˜åŒ–
  - `AiGeneratedRouteController.updateAiGeneratedRoute()`æ·»åŠ æ‰€æœ‰å­—æ®µæ›´æ–°
  - `AiGeneratedRouteService.saveAiGeneratedRoute()`æ·»åŠ `@Transactional`æ³¨è§£
  - ç¡®ä¿åˆ é™¤æ™¯ç‚¹æ“ä½œæ­£ç¡®ä¿å­˜åˆ°æ•°æ®åº“

**Bug ä¿®å¤**:
- ğŸ› ä¿®å¤ç¼–è¾‘è€…åˆ é™¤æ™¯ç‚¹åæ•°æ®ä¸æŒä¹…åŒ–
  - PUTæ¥å£ç¼ºå°‘`dailyItinerary`å­—æ®µæ›´æ–°
  - Serviceå±‚ç¼ºå°‘äº‹åŠ¡æ³¨è§£
  - å‰ç«¯å˜é‡ä½œç”¨åŸŸå†²çªï¼ˆ`const dailyItinerary` vs å…¨å±€å˜é‡ï¼‰

- ğŸ› ä¿®å¤æƒé™æ£€æŸ¥å­—æ®µé”™è¯¯
  - åä½œç•Œé¢æ£€æŸ¥`role === 'ç¼–è¾‘è€…'`è€Œé`permission === 'EDIT'`
  - ä¸»é¡µé¡¹ç›®åˆ†ç±»æ£€æŸ¥`projectParticipant.role`è€Œé`participant.permission`

- ğŸ› ä¿®å¤å˜é‡å‘½åå†²çª
  - `deleteAttraction()`å’Œ`saveActivity()`ä¸­å±€éƒ¨å˜é‡æ”¹åä¸º`localItinerary`
  - é¿å…ä¸å…¨å±€å˜é‡`dailyItinerary`å†²çª

**æŠ€æœ¯æ”¹è¿›**:
- å‰ç«¯ï¼š`collaboration.html` æ·»åŠ éœ€æ±‚å‚æ•°åŠ è½½å’Œæ™¯ç‚¹åŒ¹é…é€»è¾‘
- å‰ç«¯ï¼š`index.html` ä¿®æ­£é¡¹ç›®åˆ†ç±»é€»è¾‘
- åç«¯ï¼š`AiGeneratedRouteController` å®Œå–„PUTæ¥å£å­—æ®µæ›´æ–°
- åç«¯ï¼š`AiGeneratedRouteService` æ·»åŠ äº‹åŠ¡æ”¯æŒ

### v1.0.0 (2025-12-09)

**åˆå§‹ç‰ˆæœ¬åŠŸèƒ½**:
- âœ… ç”¨æˆ·æ³¨å†Œç™»å½•ç³»ç»Ÿ
- âœ… æ—…è¡Œé¡¹ç›®åˆ›å»ºå’Œç®¡ç†
- âœ… å¤šäººåä½œéœ€æ±‚æ”¶é›†
- âœ… AIæ™ºèƒ½è·¯çº¿ç”Ÿæˆï¼ˆKimi AIï¼‰
- âœ… é«˜å¾·åœ°å›¾POIæœç´¢
- âœ… é¢„ç®—ç®¡ç†
- âœ… è¡Œç¨‹å®‰æ’
- âœ… å®æ—¶èŠå¤©
- âœ… PDFè¡Œç¨‹å•å¯¼å‡º
- âœ… é‚®ä»¶é€šçŸ¥

---

**Â© 2025 é€”ç‚¹å„¿å•¥æ—…æ¸¸è§„åˆ’ç³»ç»Ÿ | MIT License**
